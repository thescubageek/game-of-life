"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),GOLGame=function(){function t(){_classCallCheck(this,t),this.helper=new GOLHelper,this.reset()}return _createClass(t,[{key:"reset",value:function(){this.currentState=new GOLGameState,this.stateMap=new GOLGameState,this.nextState=new GOLGameState}},{key:"buildCellStateMap",value:function(t){var e,a,n;for(a=t.y-1;a<=t.y+1;a++)for(e=t.x-1;e<=t.x+1;e++)e===t.x&&a===t.y||(n=this.stateMap.getCell(e,a),n?n.params.count=n.params.count+1:this.stateMap.addCell(e,a,{count:1}))}},{key:"nextGeneration",value:function(){var t,e,a,n,r=0;for(e=this.currentState.cells,this.stateMap.reset(),t=0;t<e.length;t++)this.buildCellStateMap(e[t]);for(n=this.stateMap.cells.filter(function(t){return 2===t.params.count||3===t.params.count}),this.nextState.reset(),t=0;t<n.length;t++){a=n[t];var l=this.currentState.getCell(a.x,a.y);l?(this.nextState.addCell(a.x,a.y,{color:l.params.color}),r++):3===a.params.count&&(this.nextState.addCell(a.x,a.y,{color:this.helper.randomColor()}),r++)}return this.currentState.cells=this.nextState.cells,r}}]),t}();